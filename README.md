chatgpt made this treehole

ç¼–å†™ä¸€ä¸ªå®ç°æ ‘æ´åŠŸèƒ½çš„phpç¨‹åºï¼Œæ‰€æœ‰äººå¯ä»¥å‘è¨€å’Œåˆ†äº«æ¶ˆæ¯é“¾æ¥ï¼Œå¹¶å®ç°æ‰€æœ‰æ•°æ®çš„mysqlæœåŠ¡å™¨å­˜æ”¾ï¼Œå¯¹æ¯æ¡æ¶ˆæ¯å‘å¸ƒæ—¶è¾“å…¥è®¾ç½®ä¸€ä¸ªç¼–è¾‘å¯†ç ï¼Œç”¨äºå¯¹è¯¥æ¡æ¶ˆæ¯çš„å†ç¼–è¾‘å’Œåˆ é™¤åŠŸèƒ½ï¼Œå·²å‘å¸ƒçš„æ¶ˆæ¯å¯ä»¥é€šè¿‡è¿™ä¸ªå¯†ç æ¥ç®¡ç†é‡æ–°ç¼–è¾‘ã€ä¿å­˜ã€åˆ é™¤ ï¼Œè¿™ä¸ªå¯†ç åªç®¡ç†è¯¥æ¡æ¶ˆæ¯ã€‚
è¿˜åŒ…æ‹¬ä»¥ä¸‹åŠŸèƒ½ï¼Œ 
1ã€æ¶ˆæ¯ç¼–è¾‘å’Œæ ‘æ´ä¿¡æ¯æµåœ¨ç½‘é¡µä¸­åˆ†å¼€å±•ç¤º
2ã€æ¶ˆæ¯ç¼–è¾‘æ¡†å¯ä»¥å®ç°æ–‡æœ¬ç¼–è¾‘å’Œå›¾ç‰‡ä¸Šä¼ ï¼Œç±»ä¼¼twitterï¼Œ
3ã€ä½¿æ¶ˆæ¯æ”¯æŒMarkdownä»£ç ï¼Œä¸”ç½‘é¡µçš„æ˜¾ç¤ºæ”¯æŒMarkdowné¢„è§ˆ
4ã€æ—¶é—´è½´çš„æ–¹å¼ç½‘é¡µæ¶ˆæ¯æ˜¾ç¤ºï¼Œæ—¶é—´ä¸ºåŒ—äº¬æ—¶é—´
5ã€æ¯æ¡æ¶ˆæ¯åæ·»åŠ å¤åˆ¶è¯¥æ¡æ¶ˆæ¯å…¨æ–‡çš„æŒ‰é’®
6ã€æ”¯æŒé“¾æ¥çš„æ–¹å¼åˆ†äº«å•é¡¹æ¶ˆæ¯çš„åŠŸèƒ½
7ã€å¯ä»¥é€šè¿‡é”®ç›˜çš„Enteré”®æˆ–è€…å‘é€æŒ‰é’®å³æäº¤æ¶ˆæ¯
8ã€ä¸Šä¼ çš„å›¾ç‰‡å­˜åœ¨ä»£ç æ–‡ä»¶ç›®å½•ä¸‹çš„imgæ–‡ä»¶å¤¹é‡Œ
9ã€å°½é‡ç¾è§‚å¤§æ°”  
10ã€ç½‘é¡µæ ·å¼ï¼Œæ˜¾ç¤ºçš„å›¾ç‰‡ä¸ºé€‚åº”æµè§ˆå™¨çª—å£å®½å¸¦å¤§å°æ¥å±•ç¤ºï¼Œæ³¨æ„æ‰‹æœºç«¯è®¿é—®å’Œç”µè„‘ç«¯è®¿é—®çš„ä½“éªŒã€‚
11ã€åœ¨æ¯æ¡æ¶ˆæ¯å‰çš„æ˜¾ç¤ºå…¶æ¶ˆæ¯çš„æ•°æ®åº“IDç¼–å·ï¼›åŒæ—¶æ”¯æŒå¿«é€Ÿè·³è½¬è‡³æŒ‡å®šIDç¼–å·ä»¥æŸ¥çœ‹æ¶ˆæ¯ï¼›å¢åŠ ç½‘é¡µæ˜¾ç¤ºæ¶ˆæ¯æ¡æ•°ä¸º10ï¼Œå¯ä»¥ç¿»é¡µï¼Œæ˜¾ç¤ºæ‰€æœ‰é¡µçš„é¡µç ï¼Œç‚¹å‡»å¯ä»¥è°ƒæ•´è¯¥é¡µã€‚
12ã€åœ¨æ¶ˆæ¯åˆ†äº«é¡µé¢å¢åŠ æ˜¾ç¤ºå½“å‰æ¶ˆæ¯é“¾æ¥äºŒç»´ç çš„åŠŸèƒ½ï¼Œé¼ æ ‡æ”¾åœ¨è¿™ä¸ªæŒ‰é’®ä¸Šæ—¶ï¼Œæ˜¾ç¤ºå½“å‰é¡µé¢çš„äºŒç»´ç 
13ã€ä½¿ç”¨ password_hash() æ›¿æ¢ md5() æ¥åŠ å¯†å¯†ç 
14ã€ä½¿ç”¨ password_verify() æ¥éªŒè¯å¯†ç 

ä¸‹é¢ç»™å‡ºä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå®ç°ä¸€ä¸ªâ€œæ ‘æ´â€åŒ¿åç•™è¨€æ¿ï¼Œä½¿ç”¨ PHP è¿æ¥ MySQL å­˜å‚¨æ•°æ®ï¼Œæ”¯æŒæ¯æ¡æ¶ˆæ¯è®¾ç½®ç¼–è¾‘å¯†ç ã€ç¼–è¾‘åˆ é™¤ã€Markdown æ¸²æŸ“ã€å›¾ç‰‡ä¸Šä¼ ã€æ—¶é—´è½´æ˜¾ç¤ºã€åˆ†é¡µã€æ¶ˆæ¯å¤åˆ¶ã€åˆ†äº«äºŒç»´ç ç­‰åŠŸèƒ½ã€‚  
  
> **æ³¨æ„ï¼š**  
> 1. æ­¤ç¤ºä¾‹ä»…ä¸ºåŸºæœ¬ç¤ºä¾‹ï¼Œç”Ÿäº§ç¯å¢ƒä¸‹è¯·æ³¨æ„é˜²æ­¢ SQL æ³¨å…¥ã€XSSã€æ–‡ä»¶ä¸Šä¼ å®‰å…¨ç­‰é—®é¢˜ï¼Œå¹¶å¢åŠ é”™è¯¯å¤„ç†ã€ç”¨æˆ·è¾“å…¥è¿‡æ»¤ç­‰å®‰å…¨æªæ–½ã€‚  
> 2. ç¤ºä¾‹ä¸­ä½¿ç”¨äº† [Parsedown](https://github.com/erusev/parsedown) è¿›è¡Œ Markdown æ¸²æŸ“ï¼Œéœ€å°† parsedown.php æ–‡ä»¶æ”¾åœ¨ä»£ç ç›®å½•ä¸‹ï¼›åŒæ—¶è¯·æå‰åœ¨ MySQL ä¸­åˆ›å»ºå¥½æ•°æ®åº“å’Œæ•°æ®è¡¨ã€‚  
> 3. ä¸Šä¼ å›¾ç‰‡å°†ä¿å­˜åœ¨é¡¹ç›®ç›®å½•ä¸‹çš„ `img/` æ–‡ä»¶å¤¹ä¸­ï¼Œè¯·ä¿è¯è¯¥ç›®å½•å­˜åœ¨ä¸”å…·æœ‰å†™æƒé™ã€‚  

ä¸‹é¢ç»™å‡ºå„æ–‡ä»¶çš„ç¤ºä¾‹ä»£ç ï¼š  

---

### 1. æ•°æ®åº“è¡¨ç»“æ„

åœ¨ MySQL ä¸­åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼ˆå¦‚ `treehole`ï¼‰ï¼Œç„¶ååˆ›å»ºæ•°æ®è¡¨ `messages`ï¼ˆç¤ºä¾‹ SQL å¦‚ä¸‹ï¼‰ï¼š

```sql
CREATE TABLE `messages` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `content` TEXT NOT NULL,
  `image` VARCHAR(255) DEFAULT NULL,
  `post_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `edit_password` VARCHAR(255) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;


```

---

### 2. config.php  
ç”¨äºæ•°æ®åº“è¿æ¥é…ç½®ã€‚

```php
<?php
// config.php
$servername = "localhost";
$username   = "root";       // æ•°æ®åº“ç”¨æˆ·å
$password   = "";           // æ•°æ®åº“å¯†ç 
$dbname     = "treehole";   // æ•°æ®åº“å

// åˆ›å»ºæ•°æ®åº“è¿æ¥
$conn = new mysqli($servername, $username, $password, $dbname);
if ($conn->connect_error) {
    die("è¿æ¥å¤±è´¥: " . $conn->connect_error);
}
$conn->set_charset("utf8mb4");
?>
```

---

### 3. index.php  
ä¸»é¡µé¢ï¼ŒåŒ…å«â€œæ¶ˆæ¯ç¼–è¾‘â€åŒºå’Œâ€œæ ‘æ´ä¿¡æ¯æµâ€åŒºï¼Œæ”¯æŒ Markdown é¢„è§ˆã€å›¾ç‰‡ä¸Šä¼ ã€åˆ†é¡µã€å¿«é€Ÿè·³è½¬ç­‰åŠŸèƒ½ã€‚

```php
<?php
// index.php
date_default_timezone_set('Asia/Shanghai');
require_once 'config.php';
require_once 'parsedown.php';  // è¯·ç¡®ä¿ parsedown.php å­˜åœ¨
$Parsedown = new Parsedown();

// åˆ†é¡µè®¾ç½®
$page = isset($_GET['page']) ? intval($_GET['page']) : 1;
if ($page < 1) $page = 1;
$messages_per_page = 10;
$offset = ($page - 1) * $messages_per_page;

// è·å–æ€»è®°å½•æ•°
$result = $conn->query("SELECT COUNT(*) as total FROM messages");
$row = $result->fetch_assoc();
$total_messages = $row['total'];
$total_pages = ceil($total_messages / $messages_per_page);

// æŸ¥è¯¢å½“å‰é¡µæ¶ˆæ¯ï¼ˆæŒ‰å‘å¸ƒæ—¶é—´å€’åºï¼‰
$sql = "SELECT * FROM messages ORDER BY post_time DESC LIMIT $offset, $messages_per_page";
$messages = $conn->query($sql);
?>
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>Tree-hole</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- å¼•å…¥ Bootstrap CSS -->
  <link rel="stylesheet" href="/bootstrap.min.css">
  <style>
    body { padding-top: 20px; }
    .message { border-bottom: 1px solid #ddd; padding: 10px 0; }
    .message img { max-width: 100%; height: auto; }
    .timeline-time { color: #888; font-size: 0.9em; }
    .copy-btn { margin-left: 10px; }
    /* åˆ†å¼€æ˜¾ç¤ºæ¶ˆæ¯ç¼–è¾‘åŒºå’Œä¿¡æ¯æµ */
    .container { max-width: 800px; }
    .preview { border: 1px solid #ccc; padding: 10px; margin-top: 10px; display: none; }
    
    /* æ‚¬æµ®æœç´¢æŒ‰é’®æ ·å¼ */
    .search-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 50%;
      padding: 15px;
      font-size: 20px;
      cursor: pointer;
      z-index: 1000;
    }
    
    /* æœç´¢æ¡†çš„æ ·å¼ */
    .search-container {
      position: fixed;
      bottom: 70px;
      right: 20px;
      background-color: white;
      border: 1px solid #ddd;
      border-radius: 5px;
      padding: 10px;
      width: 300px;
      display: none; /* é»˜è®¤éšè— */
      box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
      z-index: 999;
    }
    
    .search-container input {
      width: 100%;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
<div class="container">
  <h2 class="text-center">æ ‘æ´-ç•™è¨€æ¿</h2>
  <!-- æ¶ˆæ¯ç¼–è¾‘éƒ¨åˆ† -->
  <div class="card mb-4">
    <div class="card-header">æ¶ˆæ¯ç¼–è¾‘</div>
    <div class="card-body">
      <form action="process.php" method="post" enctype="multipart/form-data" id="messageForm">
        <div class="mb-3">
          <label for="content" class="form-label">æ¶ˆæ¯å†…å®¹ (æ”¯æŒ Markdown)</label>
          <textarea class="form-control" id="content" name="content" rows="4" placeholder="è¾“å…¥æ¶ˆæ¯å†…å®¹" required></textarea>
        </div>
        <div class="mb-3">
          <label for="image" class="form-label">ä¸Šä¼ å›¾ç‰‡ (å¯é€‰)</label>
          <input class="form-control" type="file" id="image" name="image" accept="image/*">
        </div>
        <div class="mb-3">
          <label for="edit_password" class="form-label">ç¼–è¾‘å¯†ç  (ç”¨äºåç»­ç¼–è¾‘æˆ–åˆ é™¤)</label>
          <input type="password" class="form-control" id="edit_password" name="edit_password" placeholder="è®¾ç½®ç¼–è¾‘å¯†ç " required>
        </div>
        <button type="submit" class="btn btn-primary" id="sendBtn">å‘é€</button>
        <button type="button" class="btn btn-secondary" id="previewBtn">é¢„è§ˆ</button>
      </form>
      <div class="preview" id="previewArea"></div>
    </div>
  </div>
  
  <!-- æ ‘æ´ä¿¡æ¯æµéƒ¨åˆ† -->
  <div class="card mb-4">
    <div class="card-header">ä¿¡æ¯æµ</div>
    <div class="card-body">
      <?php while($msg = $messages->fetch_assoc()): ?>
      <div class="message" id="msg-<?php echo $msg['id']; ?>">
        <div>
          <strong>#<?php echo $msg['id']; ?></strong>
          <span class="timeline-time"><?php echo date("Y-m-d H:i:s", strtotime($msg['post_time'])); ?></span>
        </div>
        <div class="content">
          <?php 
            // ä½¿ç”¨ Parsedown æ¸²æŸ“ Markdown ä¸º HTML
            $htmlContent = $Parsedown->text($msg['content']);
            echo $htmlContent;
          ?>
        </div>
        <?php if($msg['image']): ?>
        <div class="mt-2">
          <img src="<?php echo $msg['image']; ?>" alt="ä¸Šä¼ å›¾ç‰‡">
        </div>
        <?php endif; ?>
        <div class="mt-2">
          <!-- å¤åˆ¶æŒ‰é’® -->
          <button class="btn btn-sm btn-outline-secondary copy-btn" data-content="<?php echo htmlspecialchars($msg['content']); ?>">å¤åˆ¶</button>
          <!-- åˆ†äº«æŒ‰é’® -->
          <a href="share.php?id=<?php echo $msg['id']; ?>" class="btn btn-sm btn-outline-info">åˆ†äº«</a>
          <!-- ç¼–è¾‘å’Œåˆ é™¤æŒ‰é’® -->
          <a href="edit.php?id=<?php echo $msg['id']; ?>" class="btn btn-sm btn-outline-warning">ç¼–è¾‘</a>
          <a href="delete.php?id=<?php echo $msg['id']; ?>" class="btn btn-sm btn-outline-danger">åˆ é™¤</a>
        </div>
      </div>
      <?php endwhile; ?>
      
      <!-- åˆ†é¡µå¯¼èˆª -->
      <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center">
          <?php for($i = 1; $i <= $total_pages; $i++): ?>
          <li class="page-item <?php if($i == $page) echo 'active'; ?>">
            <a class="page-link" href="?page=<?php echo $i; ?>"><?php echo $i; ?></a>
          </li>
          <?php endfor; ?>
        </ul>
      </nav>
      
      <!-- å¿«é€Ÿè·³è½¬è‡³æŒ‡å®šID -->
      <div class="input-group mb-3">
        <input type="number" class="form-control" id="jumpId" placeholder="è¾“å…¥æ¶ˆæ¯IDè·³è½¬">
        <button class="btn btn-outline-secondary" id="jumpBtn">è·³è½¬</button>
      </div>
    </div>
  </div>
</div>

<!-- æ‚¬æµ®æœç´¢æŒ‰é’® -->
<button class="search-btn" id="searchBtn">ğŸ”</button>

<!-- æœç´¢æ¡† -->
<div class="search-container" id="searchContainer">
  <form action="search.php" method="get">
    <input type="text" class="form-control" name="q" placeholder="è¾“å…¥æœç´¢å†…å®¹æˆ–æ ‡ç­¾" required>
    <button class="btn btn-primary" type="submit">æœç´¢</button>
    <button type="button" class="btn btn-outline-danger" id="closeSearch">å…³é—­</button>
  </form>
</div>

<!-- å¼•å…¥ jQuery ä¸ Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
<!-- å¼•å…¥ Marked.js ç”¨äº Markdown é¢„è§ˆ -->
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script>
$(document).ready(function(){
  // è¡¨å•æ”¯æŒ Enter é”®æäº¤ï¼ˆä¸æ¢è¡Œï¼‰
  $('#messageForm').on('keypress', function(e) {
    if(e.which == 13 && !e.shiftKey) {
      e.preventDefault();
      $('#sendBtn').click();
    }
  });
  
  // é¢„è§ˆæŒ‰é’®åŠŸèƒ½ï¼šå°† Markdown è½¬ä¸º HTML æ˜¾ç¤º/éšè—é¢„è§ˆåŒº
  $('#previewBtn').click(function(){
    var content = $('#content').val();
    var html = marked.parse(content);
    $('#previewArea').html(html).toggle();
  });
  
  // å¤åˆ¶æŒ‰é’®åŠŸèƒ½
  $('.copy-btn').click(function(){
    var content = $(this).data('content');
    navigator.clipboard.writeText(content).then(function(){
      alert("å·²å¤åˆ¶æ¶ˆæ¯å†…å®¹åˆ°å‰ªè´´æ¿");
    }, function(err){
      alert("å¤åˆ¶å¤±è´¥: " + err);
    });
  });
  
  // å¿«é€Ÿè·³è½¬åŠŸèƒ½ï¼šç‚¹å‡»è·³è½¬æŒ‰é’®ï¼Œæ‰“å¼€æŒ‡å®šæ¶ˆæ¯çš„åˆ†äº«é¡µé¢
  $('#jumpBtn').click(function(){
    var id = $('#jumpId').val();
    if(id){
      window.location.href = 'share.php?id=' + id;
    }
  });

  // ç‚¹å‡»æœç´¢æŒ‰é’®ï¼Œæ˜¾ç¤ºæœç´¢æ¡†
  $('#searchBtn').click(function() {
    $('#searchContainer').fadeIn();
  });

  // ç‚¹å‡»å…³é—­æŒ‰é’®ï¼Œéšè—æœç´¢æ¡†
  $('#closeSearch').click(function() {
    $('#searchContainer').fadeOut();
  });
});
</script>
</body>
</html>

```

---

### 4. process.php  
å¤„ç†æ–°æ¶ˆæ¯æäº¤ï¼ŒåŒ…å«å›¾ç‰‡ä¸Šä¼ å’Œå°†æ¶ˆæ¯å†™å…¥æ•°æ®åº“ã€‚

```php
<?php
// process.php
date_default_timezone_set('Asia/Shanghai');
require_once 'config.php';

if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    $content = trim($_POST['content']);
    $edit_password = trim($_POST['edit_password']);
    
    if ($content == '' || $edit_password == '') {
        die("æ¶ˆæ¯å†…å®¹å’Œç¼–è¾‘å¯†ç ä¸èƒ½ä¸ºç©ºã€‚");
    }
    
    // ä½¿ç”¨ password_hash() å¯¹ç¼–è¾‘å¯†ç è¿›è¡ŒåŠ å¯†å¤„ç†
    $encrypted_password = password_hash($edit_password, PASSWORD_DEFAULT);  // ä½¿ç”¨é»˜è®¤ç®—æ³•ï¼ˆé€šå¸¸æ˜¯ bcryptï¼‰

    // å›¾ç‰‡å¤„ç†
    $image_path = '';
    if (isset($_FILES['image']) && $_FILES['image']['error'] == 0) {
        $allowed_types = ['image/jpeg', 'image/png', 'image/gif'];
        if (!in_array($_FILES['image']['type'], $allowed_types)) {
            die("åªæ”¯æŒ JPEG, PNG, GIF æ ¼å¼çš„å›¾ç‰‡ã€‚");
        }
        $ext = pathinfo($_FILES['image']['name'], PATHINFO_EXTENSION);
        $new_filename = 'img/' . time() . '_' . rand(1000,9999) . '.' . $ext;
        if (!move_uploaded_file($_FILES['image']['tmp_name'], $new_filename)) {
            die("å›¾ç‰‡ä¸Šä¼ å¤±è´¥ã€‚");
        }
        $image_path = $new_filename;
    }
    
    // æ’å…¥æ•°æ®åº“ï¼Œä¿å­˜åŠ å¯†åçš„ç¼–è¾‘å¯†ç 
    $stmt = $conn->prepare("INSERT INTO messages (content, image, edit_password) VALUES (?, ?, ?)");
    $stmt->bind_param("sss", $content, $image_path, $encrypted_password);
    if ($stmt->execute()) {
        header("Location: index.php");
    } else {
        echo "å‘å¸ƒæ¶ˆæ¯å¤±è´¥: " . $conn->error;
    }
    $stmt->close();
} else {
    header("Location: index.php");
}
?>

```

---

### 5. edit.php  
å®ç°æ¶ˆæ¯ç¼–è¾‘åŠŸèƒ½ï¼šå…ˆéªŒè¯ç¼–è¾‘å¯†ç ï¼ˆæ­¤å¤„ä½¿ç”¨ session ä¿å­˜éªŒè¯çŠ¶æ€ï¼‰ï¼ŒéªŒè¯é€šè¿‡åæ˜¾ç¤ºç¼–è¾‘è¡¨å•ï¼Œæ”¯æŒæ›´æ¢å›¾ç‰‡ã€‚

```php
<?php
// edit.php
session_start();
date_default_timezone_set('Asia/Shanghai');
require_once 'config.php';

$id = isset($_GET['id']) ? intval($_GET['id']) : 0;
if ($id <= 0) {
    die("æ— æ•ˆçš„æ¶ˆæ¯IDã€‚");
}

// è·å–è¯¥æ¶ˆæ¯æ•°æ®
$stmt = $conn->prepare("SELECT * FROM messages WHERE id = ?");
$stmt->bind_param("i", $id);
$stmt->execute();
$result = $stmt->get_result();
if ($result->num_rows == 0) {
    die("æ¶ˆæ¯ä¸å­˜åœ¨ã€‚");
}
$message = $result->fetch_assoc();
$stmt->close();

// å¤„ç†è¡¨å•æäº¤
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    if (!isset($_SESSION['verified'])) {
        $_SESSION['verified'] = array();
    }
    if (isset($_POST['verify'])) {
        // éªŒè¯å¯†ç ï¼šä½¿ç”¨ password_verify() éªŒè¯å¯†ç æ˜¯å¦æ­£ç¡®
        $input_password = trim($_POST['edit_password']);
        if (!password_verify($input_password, $message['edit_password'])) {
            $error = "å¯†ç é”™è¯¯ã€‚";
        } else {
            $_SESSION['verified'][$id] = true;
        }
    } elseif (isset($_POST['update'])) {
        // æ›´æ–°æ¶ˆæ¯
        if (!isset($_SESSION['verified'][$id]) || $_SESSION['verified'][$id] !== true) {
            $error = "è¯·å…ˆéªŒè¯å¯†ç ã€‚";
        } else {
            $new_content = trim($_POST['content']);
            if ($new_content == '') {
                $error = "æ¶ˆæ¯å†…å®¹ä¸èƒ½ä¸ºç©ºã€‚";
            } else {
                $image_path = $message['image'];
                if (isset($_FILES['image']) && $_FILES['image']['error'] == 0) {
                    $allowed_types = ['image/jpeg', 'image/png', 'image/gif'];
                    if (!in_array($_FILES['image']['type'], $allowed_types)) {
                        $error = "åªæ”¯æŒ JPEG, PNG, GIF æ ¼å¼çš„å›¾ç‰‡ã€‚";
                    } else {
                        // è‹¥å­˜åœ¨æ—§å›¾ç‰‡åˆ™åˆ é™¤
                        if ($image_path && file_exists($image_path)) {
                            unlink($image_path);
                        }
                        $ext = pathinfo($_FILES['image']['name'], PATHINFO_EXTENSION);
                        $new_filename = 'img/' . time() . '_' . rand(1000,9999) . '.' . $ext;
                        if (!move_uploaded_file($_FILES['image']['tmp_name'], $new_filename)) {
                            $error = "å›¾ç‰‡ä¸Šä¼ å¤±è´¥ã€‚";
                        } else {
                            $image_path = $new_filename;
                        }
                    }
                }
                if (!isset($error)) {
                    $stmt = $conn->prepare("UPDATE messages SET content = ?, image = ? WHERE id = ?");
                    $stmt->bind_param("ssi", $new_content, $image_path, $id);
                    if ($stmt->execute()) {
                        unset($_SESSION['verified'][$id]);
                        header("Location: index.php");
                        exit;
                    } else {
                        $error = "æ›´æ–°å¤±è´¥: " . $conn->error;
                    }
                    $stmt->close();
                }
            }
        }
    }
}
?>
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>ç¼–è¾‘æ¶ˆæ¯ #<?php echo $id; ?></title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- å¼•å…¥ Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-4">
  <h3>ç¼–è¾‘æ¶ˆæ¯ #<?php echo $id; ?></h3>
  <?php if(isset($error)): ?>
    <div class="alert alert-danger"><?php echo $error; ?></div>
  <?php endif; ?>
  
  <?php if(!isset($_SESSION['verified'][$id]) || $_SESSION['verified'][$id] !== true): ?>
  <!-- éªŒè¯å¯†ç è¡¨å• -->
  <form action="edit.php?id=<?php echo $id; ?>" method="post">
    <div class="mb-3">
      <label for="edit_password" class="form-label">è¯·è¾“å…¥ç¼–è¾‘å¯†ç ï¼š</label>
      <input type="password" class="form-control" id="edit_password" name="edit_password" required>
    </div>
    <button type="submit" name="verify" class="btn btn-primary">éªŒè¯å¯†ç </button>
    <a href="index.php" class="btn btn-secondary">è¿”å›</a>
  </form>
  <?php else: ?>
  <!-- ç¼–è¾‘è¡¨å• -->
  <form action="edit.php?id=<?php echo $id; ?>" method="post" enctype="multipart/form-data">
    <div class="mb-3">
      <label for="content" class="form-label">æ¶ˆæ¯å†…å®¹ (æ”¯æŒ Markdown)</label>
      <textarea class="form-control" id="content" name="content" rows="4" required><?php echo htmlspecialchars($message['content']); ?></textarea>
    </div>
    <?php if($message['image']): ?>
    <div class="mb-3">
      <label class="form-label">å½“å‰å›¾ç‰‡ï¼š</label><br>
      <img src="<?php echo $message['image']; ?>" alt="å½“å‰å›¾ç‰‡" style="max-width:200px;">
    </div>
    <?php endif; ?>
    <div class="mb-3">
      <label for="image" class="form-label">æ›´æ¢å›¾ç‰‡ (å¯é€‰)ï¼š</label>
      <input class="form-control" type="file" id="image" name="image" accept="image/*">
    </div>
    <button type="submit" name="update" class="btn btn-success">ä¿å­˜æ›´æ–°</button>
    <a href="index.php" class="btn btn-secondary">å–æ¶ˆ</a>
  </form>
  <?php endif; ?>
</div>
<!-- å¼•å…¥ Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

```

---

### 6. delete.php  
å®ç°æ¶ˆæ¯åˆ é™¤åŠŸèƒ½ï¼Œæµç¨‹ä¸ç¼–è¾‘ç±»ä¼¼ï¼Œå…ˆéªŒè¯å¯†ç ï¼Œå†è¿›è¡Œåˆ é™¤æ“ä½œï¼ˆåŒæ—¶åˆ é™¤å›¾ç‰‡æ–‡ä»¶ï¼‰ã€‚

```php
<?php
// delete.php
session_start();
date_default_timezone_set('Asia/Shanghai');
require_once 'config.php';

$id = isset($_GET['id']) ? intval($_GET['id']) : 0;
if ($id <= 0) {
    die("æ— æ•ˆçš„æ¶ˆæ¯IDã€‚");
}

// è·å–è¯¥æ¶ˆæ¯æ•°æ®
$stmt = $conn->prepare("SELECT * FROM messages WHERE id = ?");
$stmt->bind_param("i", $id);
$stmt->execute();
$result = $stmt->get_result();
if ($result->num_rows == 0) {
    die("æ¶ˆæ¯ä¸å­˜åœ¨ã€‚");
}
$message = $result->fetch_assoc();
$stmt->close();

if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    if (!isset($_SESSION['del_verified'])) {
        $_SESSION['del_verified'] = array();
    }
    if (isset($_POST['verify'])) {
        // éªŒè¯å¯†ç ï¼šä½¿ç”¨ password_verify() éªŒè¯å¯†ç æ˜¯å¦æ­£ç¡®
        $input_password = trim($_POST['edit_password']);
        if (!password_verify($input_password, $message['edit_password'])) {
            $error = "å¯†ç é”™è¯¯ã€‚";
        } else {
            $_SESSION['del_verified'][$id] = true;
        }
    } elseif (isset($_POST['delete'])) {
        if (!isset($_SESSION['del_verified'][$id]) || $_SESSION['del_verified'][$id] !== true) {
            $error = "è¯·å…ˆéªŒè¯å¯†ç ã€‚";
        } else {
            // åˆ é™¤è®°å½•
            $stmt = $conn->prepare("DELETE FROM messages WHERE id = ?");
            $stmt->bind_param("i", $id);
            if ($stmt->execute()) {
                // åˆ é™¤å›¾ç‰‡æ–‡ä»¶ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
                if ($message['image'] && file_exists($message['image'])) {
                    unlink($message['image']);
                }
                unset($_SESSION['del_verified'][$id]);
                header("Location: index.php");
                exit;
            } else {
                $error = "åˆ é™¤å¤±è´¥: " . $conn->error;
            }
            $stmt->close();
        }
    }
}
?>
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>åˆ é™¤æ¶ˆæ¯ #<?php echo $id; ?></title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- å¼•å…¥ Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-4">
  <h3>åˆ é™¤æ¶ˆæ¯ #<?php echo $id; ?></h3>
  <?php if(isset($error)): ?>
    <div class="alert alert-danger"><?php echo $error; ?></div>
  <?php endif; ?>
  
  <?php if(!isset($_SESSION['del_verified'][$id]) || $_SESSION['del_verified'][$id] !== true): ?>
  <!-- éªŒè¯å¯†ç è¡¨å• -->
  <form action="delete.php?id=<?php echo $id; ?>" method="post">
    <div class="mb-3">
      <label for="edit_password" class="form-label">è¯·è¾“å…¥ç¼–è¾‘å¯†ç ç¡®è®¤åˆ é™¤ï¼š</label>
      <input type="password" class="form-control" id="edit_password" name="edit_password" required>
    </div>
    <button type="submit" name="verify" class="btn btn-danger">éªŒè¯å¯†ç </button>
    <a href="index.php" class="btn btn-secondary">è¿”å›</a>
  </form>
  <?php else: ?>
  <div class="alert alert-warning">ç¡®è®¤åˆ é™¤æ¶ˆæ¯ #<?php echo $id; ?>ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚</div>
  <form action="delete.php?id=<?php echo $id; ?>" method="post">
    <button type="submit" name="delete" class="btn btn-danger">ç¡®å®šåˆ é™¤</button>
    <a href="index.php" class="btn btn-secondary">å–æ¶ˆ</a>
  </form>
  <?php endif; ?>
</div>
<!-- å¼•å…¥ Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

```

---

### 7. share.php  
å®ç°å•æ¡æ¶ˆæ¯åˆ†äº«é¡µé¢ï¼Œå±•ç¤ºæ¶ˆæ¯è¯¦æƒ…ä»¥åŠä¸€ä¸ªåˆ†äº«æŒ‰é’®ï¼Œå½“é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºå½“å‰é¡µé¢é“¾æ¥ç”Ÿæˆçš„äºŒç»´ç ã€‚

```php
<?php
// share.php
date_default_timezone_set('Asia/Shanghai');
require_once 'config.php';
require_once 'parsedown.php';
$Parsedown = new Parsedown();

$id = isset($_GET['id']) ? intval($_GET['id']) : 0;
if ($id <= 0) {
    die("æ— æ•ˆçš„æ¶ˆæ¯IDã€‚");
}

// è·å–è¯¥æ¶ˆæ¯æ•°æ®
$stmt = $conn->prepare("SELECT * FROM messages WHERE id = ?");
$stmt->bind_param("i", $id);
$stmt->execute();
$result = $stmt->get_result();
if ($result->num_rows == 0) {
    die("æ¶ˆæ¯ä¸å­˜åœ¨ã€‚");
}
$message = $result->fetch_assoc();
$stmt->close();

// æ„é€ åˆ†äº«é“¾æ¥ï¼ˆæŒ‡å‘ share.php å¹¶å¸¦ä¸Šè¯¥æ¶ˆæ¯IDï¼‰
$protocol = (!empty($_SERVER['HTTPS']) && $_SERVER['HTTPS'] !== 'off' || $_SERVER['SERVER_PORT'] == 443) ? "https://" : "http://";
$share_url = $protocol . $_SERVER['HTTP_HOST'] . dirname($_SERVER['REQUEST_URI']) . "/share.php?id=" . $id;
// ä½¿ç”¨ QRServer API ç”ŸæˆäºŒç»´ç 
$qr_code_url = "https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=" . urlencode($share_url);
?>
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>åˆ†äº«æ¶ˆæ¯ #<?php echo $id; ?></title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/bootstrap.min.css">
  <style>
    .search-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 50%;
      padding: 15px;
      font-size: 20px;
      cursor: pointer;
      z-index: 1000;
    }
    
    .search-container {
      position: fixed;
      bottom: 70px;
      right: 20px;
      background-color: white;
      border: 1px solid #ddd;
      border-radius: 5px;
      padding: 10px;
      width: 300px;
      display: none;
      box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
      z-index: 999;
    }
    
    .search-container input {
      width: 100%;
      margin-bottom: 10px;
    }
    
    /* äºŒç»´ç æ ·å¼ */
    .qr-code {
      position: absolute;
      display: none;
      border: 1px solid #ddd;
      padding: 5px;
      background: #fff;
      z-index: 1000;
    }

    .share-btn {
      position: relative;
    }
  </style>
</head>
<body>
<div class="container mt-4">
  <h3>åˆ†äº«æ¶ˆæ¯ #<?php echo $id; ?></h3>
  <div class="card">
    <div class="card-body">
      <div class="mb-2">
        <strong>#<?php echo $message['id']; ?></strong>
        <span class="text-muted"><?php echo date("Y-m-d H:i:s", strtotime($message['post_time'])); ?></span>
      </div>
      <div class="content">
        <?php echo $Parsedown->text($message['content']); ?>
      </div>
      <?php if($message['image']): ?>
      <div class="mt-2">
        <img src="<?php echo $message['image']; ?>" alt="ä¸Šä¼ å›¾ç‰‡" style="max-width: 100%; height: auto;">
      </div>
      <?php endif; ?>
      <div class="mt-3">
        <button class="btn btn-outline-secondary" id="copyFullContentBtn" data-content="<?php echo htmlspecialchars($message['content']); ?>">å¤åˆ¶</button>
        <a href="edit.php?id=<?php echo $id; ?>" class="btn btn-warning">ç¼–è¾‘</a>
        <a href="share.php?id=<?php echo $id; ?>" class="btn btn-outline-info">é“¾æ¥</a>
        
        <!-- äºŒç»´ç åˆ†äº«æŒ‰é’® -->
        <button class="btn btn-outline-info share-btn" id="qrBtn">äºŒç»´ç </button>
        <div class="qr-code" id="qrCode">
          <img src="<?php echo $qr_code_url; ?>" alt="äºŒç»´ç ">
        </div>
      </div>
    </div>
  </div>
  <a href="index.php" class="btn btn-link mt-3">è¿”å›æ ‘æ´</a>
</div>

<!-- æ‚¬æµ®æœç´¢æŒ‰é’® -->
<button class="search-btn" id="searchBtn">ğŸ”</button>

<!-- æœç´¢æ¡† -->
<div class="search-container" id="searchContainer">
  <form action="search.php" method="get">
    <input type="text" class="form-control" name="q" placeholder="è¾“å…¥æœç´¢å†…å®¹æˆ–æ ‡ç­¾" required>
    <button class="btn btn-primary" type="submit">æœç´¢</button>
    <button type="button" class="btn btn-outline-danger" id="closeSearch">å…³é—­</button>
  </form>
</div>

<!-- å¼•å…¥ jQuery ä¸ Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
  $(document).ready(function() {
    // ç‚¹å‡»æœç´¢æŒ‰é’®ï¼Œæ˜¾ç¤ºæœç´¢æ¡†
    $('#searchBtn').click(function() {
      $('#searchContainer').fadeIn();
    });

    // ç‚¹å‡»å…³é—­æŒ‰é’®ï¼Œéšè—æœç´¢æ¡†
    $('#closeSearch').click(function() {
      $('#searchContainer').fadeOut();
    });

    // æ˜¾ç¤ºäºŒç»´ç ï¼Œå½“é¼ æ ‡æ‚¬åœåœ¨äºŒç»´ç åˆ†äº«æŒ‰é’®ä¸Šæ—¶æ˜¾ç¤ºäºŒç»´ç 
    $('#qrBtn').hover(function(){
      $('#qrCode').css({
        top: $(this).position().top + $(this).outerHeight() + 5,
        left: $(this).position().left
      }).fadeIn();
    }, function(){
      $('#qrCode').fadeOut();
    });
  });
</script>
</body>
</html>

```
### 8. search.php  
æœç´¢åŠŸèƒ½
```php
<?php
// search.php
date_default_timezone_set('Asia/Shanghai');
require_once 'config.php';
require_once 'parsedown.php';
$Parsedown = new Parsedown();

$q = isset($_GET['q']) ? trim($_GET['q']) : '';
if ($q == '') {
    die("è¯·è¾“å…¥æœç´¢å†…å®¹ã€‚");
}

// æœç´¢æ¶ˆæ¯å†…å®¹æˆ–æ ‡ç­¾ï¼ˆå¸¦ # çš„æ ‡ç­¾ï¼‰
$sql = "SELECT * FROM messages WHERE content LIKE ? OR content LIKE ?";
$stmt = $conn->prepare($sql);
$searchTerm = "%" . $q . "%";
$searchTag = "%" . '#' . $q . "%";
$stmt->bind_param("ss", $searchTerm, $searchTag);
$stmt->execute();
$messages = $stmt->get_result();

// è·å–æœç´¢åˆ°çš„æ¶ˆæ¯ ID åˆ—è¡¨
$search_ids = [];
while ($row = $messages->fetch_assoc()) {
    $search_ids[] = $row['id'];
}

// è·å–æ¶ˆæ¯æ€»æ•°
$total_results = count($search_ids);
?>
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>æœç´¢ç»“æœ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/bootstrap.min.css">
  <style>
    .search-ids { margin-bottom: 20px; }
    .message { border-bottom: 1px solid #ddd; padding: 10px 0; }
    .message img { 
        max-width: 100%; 
        height: auto;
        display: block;
        margin: 0 auto;
    }
    .timeline-time { color: #888; font-size: 0.9em; }
    .copy-btn { margin-left: 10px; }
    /* æ‚¬æµ®æœç´¢æŒ‰é’®æ ·å¼ */
    .search-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 50%;
      padding: 15px;
      font-size: 20px;
      cursor: pointer;
      z-index: 1000;
    }
    
    /* æœç´¢æ¡†çš„æ ·å¼ */
    .search-container {
      position: fixed;
      bottom: 70px;
      right: 20px;
      background-color: white;
      border: 1px solid #ddd;
      border-radius: 5px;
      padding: 10px;
      width: 300px;
      display: none; /* é»˜è®¤éšè— */
      box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
      z-index: 999;
    }
    
    .search-container input {
      width: 100%;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
<div class="container mt-4">
  <h3>æœç´¢ç»“æœï¼š<?php echo htmlspecialchars($q); ?></h3>
  
  <!-- æ˜¾ç¤ºæœç´¢åˆ°çš„æ¡æ•°å¹¶åˆ—å‡ºID -->
  <?php if ($total_results > 0): ?>
    <div class="search-ids">
      <p>æœç´¢åˆ° <?php echo $total_results; ?> æ¡æ¶ˆæ¯ï¼Œç‚¹å‡»IDè·³è½¬åˆ°å¯¹åº”æ¶ˆæ¯ï¼š</p>
      <div>
        <?php foreach ($search_ids as $id): ?>
          <a href="#msg-<?php echo $id; ?>" class="btn btn-outline-primary btn-sm"><?php echo $id; ?></a>
        <?php endforeach; ?>
      </div>
    </div>
  <?php else: ?>
    <p>æ²¡æœ‰æ‰¾åˆ°ç›¸å…³çš„æ¶ˆæ¯ã€‚</p>
  <?php endif; ?>

  <!-- æœç´¢ç»“æœå±•ç¤º -->
  <div class="card mb-4">
    <div class="card-body">
      <?php 
      // æŸ¥è¯¢æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„æ¶ˆæ¯ï¼ŒæŒ‰æ—¶é—´æ’åº
      $sql = "SELECT * FROM messages WHERE content LIKE ? OR content LIKE ? ORDER BY post_time DESC";
      $stmt = $conn->prepare($sql);
      $stmt->bind_param("ss", $searchTerm, $searchTag);
      $stmt->execute();
      $messages = $stmt->get_result();

      while ($msg = $messages->fetch_assoc()): ?>
      <div class="message" id="msg-<?php echo $msg['id']; ?>">
        <div>
          <strong>#<?php echo $msg['id']; ?></strong>
          <span class="timeline-time"><?php echo date("Y-m-d H:i:s", strtotime($msg['post_time'])); ?></span>
        </div>
        <div class="content">
          <?php 
            // ä½¿ç”¨ Parsedown æ¸²æŸ“ Markdown ä¸º HTML
            $htmlContent = $Parsedown->text($msg['content']);
            echo $htmlContent;
          ?>
        </div>
        <?php if ($msg['image']): ?>
        <div class="mt-2">
          <img src="<?php echo $msg['image']; ?>" alt="ä¸Šä¼ å›¾ç‰‡">
        </div>
        <?php endif; ?>
        <div class="mt-2">
          <button class="btn btn-sm btn-outline-secondary copy-btn" data-content="<?php echo htmlspecialchars($msg['content']); ?>">å¤åˆ¶å…¨æ–‡</button>
          <a href="share.php?id=<?php echo $msg['id']; ?>" class="btn btn-sm btn-outline-info">åˆ†äº«</a>
          <a href="edit.php?id=<?php echo $msg['id']; ?>" class="btn btn-sm btn-outline-warning">ç¼–è¾‘</a>
          <a href="delete.php?id=<?php echo $msg['id']; ?>" class="btn btn-sm btn-outline-danger">åˆ é™¤</a>
        </div>
      </div>
      <?php endwhile; ?>
    </div>
      <a href="index.php" class="btn btn-link mt-3">è¿”å›æ ‘æ´</a>
  </div>

  <!-- æ‚¬æµ®æœç´¢æŒ‰é’® -->
  <button class="search-btn" id="searchBtn">ğŸ”</button>

  <!-- æœç´¢æ¡† -->
  <div class="search-container" id="searchContainer">
    <form action="search.php" method="get">
      <input type="text" class="form-control" name="q" placeholder="è¾“å…¥æœç´¢å†…å®¹æˆ–æ ‡ç­¾" required>
      <button class="btn btn-primary" type="submit">æœç´¢</button>
      <button type="button" class="btn btn-outline-danger" id="closeSearch">å…³é—­</button>
    </form>
  </div>

  <!-- å¼•å…¥ jQuery ä¸ Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
  $(document).ready(function() {
    // ç‚¹å‡»æœç´¢æŒ‰é’®ï¼Œæ˜¾ç¤ºæœç´¢æ¡†
    $('#searchBtn').click(function() {
      $('#searchContainer').fadeIn();
    });

    // ç‚¹å‡»å…³é—­æŒ‰é’®ï¼Œéšè—æœç´¢æ¡†
    $('#closeSearch').click(function() {
      $('#searchContainer').fadeOut();
    });
  });
  </script>
</body>
</html>

```

---

## å°ç»“

ä»¥ä¸Šä»£ç ç¤ºä¾‹å®ç°äº†ä»¥ä¸‹åŠŸèƒ½ï¼š  

1. **æ¶ˆæ¯ç¼–è¾‘å’Œæ ‘æ´ä¿¡æ¯æµåˆ†å¼€å±•ç¤º**ï¼šåœ¨ index.php ä¸­å°†â€œæ¶ˆæ¯ç¼–è¾‘â€åŒºä¸æ¶ˆæ¯ä¿¡æ¯æµåˆ†åˆ«æ˜¾ç¤ºã€‚  
2. **æ”¯æŒæ–‡æœ¬ç¼–è¾‘ä¸å›¾ç‰‡ä¸Šä¼ **ï¼šç¼–è¾‘åŒºå†…åŒ…å« textarea å’Œæ–‡ä»¶ä¸Šä¼ æ§ä»¶ï¼Œç±»ä¼¼ twitterã€‚  
3. **æ”¯æŒ Markdown ä»£ç ä¸é¢„è§ˆ**ï¼šä½¿ç”¨ Parsedown æ¸²æŸ“ Markdownï¼ŒåŒæ—¶å€ŸåŠ© Marked.js å®ç°é¢„è§ˆã€‚  
4. **æ—¶é—´è½´æ˜¾ç¤ºï¼ˆåŒ—äº¬æ—¶é—´ï¼‰**ï¼šé€šè¿‡è®¾ç½®æ—¶åŒºä¸º Asia/Shanghaiï¼Œæ¶ˆæ¯æŒ‰ç…§å‘å¸ƒæ—¶é—´æ˜¾ç¤ºã€‚  
5. **æ¶ˆæ¯å¤åˆ¶æŒ‰é’®**ï¼šæ¯æ¡æ¶ˆæ¯åéƒ½æœ‰å¤åˆ¶æŒ‰é’®ï¼Œè°ƒç”¨ Clipboard API å®ç°å¤åˆ¶åŠŸèƒ½ã€‚  
6. **å•æ¡æ¶ˆæ¯åˆ†äº«**ï¼šç‚¹å‡»â€œåˆ†äº«â€è¿›å…¥ share.php é¡µé¢ï¼Œæä¾›åˆ†äº«é“¾æ¥åŠäºŒç»´ç ï¼ˆé¼ æ ‡æ‚¬åœæ˜¾ç¤ºï¼‰ã€‚  
7. **æ”¯æŒé”®ç›˜ Enter é”®æäº¤**ï¼šåœ¨ç¼–è¾‘åŒºæŒ‰ Enter é”®ï¼ˆéæ¢è¡Œï¼‰å³å¯æäº¤æ¶ˆæ¯ã€‚  
8. **å›¾ç‰‡å­˜æ”¾åœ¨ img æ–‡ä»¶å¤¹**ï¼šä¸Šä¼ çš„å›¾ç‰‡å­˜æ”¾åˆ°é¡¹ç›®ç›®å½•ä¸‹çš„ img æ–‡ä»¶å¤¹ä¸­ã€‚  
9. **ç¾è§‚å¤§æ°”çš„é¡µé¢æ ·å¼**ï¼šä½¿ç”¨ Bootstrap å®ç°å“åº”å¼å¸ƒå±€ï¼Œé€‚åº”æ‰‹æœºå’Œç”µè„‘ç«¯è®¿é—®ã€‚  
10. **æ˜¾ç¤ºæ•°æ®åº“ IDã€å¿«é€Ÿè·³è½¬åŠåˆ†é¡µ**ï¼šæ¯æ¡æ¶ˆæ¯å‰æ˜¾ç¤º IDï¼Œå¹¶æä¾›è¾“å…¥æ¡†å®ç°è·³è½¬ï¼ŒåŒæ—¶æ”¯æŒæ¯é¡µ 10 æ¡æ¶ˆæ¯çš„ç¿»é¡µã€‚
11. **æœç´¢åŠŸèƒ½**ï¼šé€šè¿‡å³ä¸‹è§’çš„å›ºå®šæœç´¢æŒ‰é’®
12. **æ”¯æŒä¸»é¢˜ï¼ˆé»‘æš—/ç™½å¤©ï¼‰åˆ‡æ¢**ï¼šåè‰²ç½‘é¡µèƒŒæ™¯å’Œæ–‡å­—é¢œè‰²

æ ¹æ®å®é™…éœ€æ±‚å¯è¿›ä¸€æ­¥æ‰©å±•å’Œå®Œå–„ï¼Œæ¯”å¦‚å¢åŠ  CSRF é˜²æŠ¤ã€å¯†ç åŠ å¯†å­˜å‚¨ã€è¾“å…¥è¿‡æ»¤ç­‰å®‰å…¨æªæ–½ã€‚å¸Œæœ›è¿™ä¸ªç¤ºä¾‹èƒ½ç»™ä½ æä¾›ä¸€ä¸ªå‚è€ƒå®ç°ï¼
